// Ejemplo de ceros con 41

#include <pic14/pic12f683.h>
 
//To compile:
//sdcc -mpic14 -p16f675 blink.c
 
//To program the chip using picp:
//Assuming /dev/ttyUSB0 is the serial port.
 
//Erase the chip:
//picp /dev/ttyUSB0 16f887 -ef
 
//Write the program:
//picp /dev/ttyUSB0 16f887 -wp blink.hex
 
//Write the configuration words (optional):
//picp /dev/ttyUSB0 16f887 -wc 0x2ff4 0x3fff
 
//Doing it all at once: erasing, programming, and reading back config words:
//picp /dev/ttyUSB0 16f887 -ef -wp blink.hex -rc
 
//To program the chip using pk2cmd:
//pk2cmd -M -PPIC16f887 -Fblink.hex
 
void delay (unsigned inttiempo);
 
void main(void)
{
	// Configuracion del MCU
    TRISIO = 0b00001000; //Poner todos los pines como salidas
	GPIO = 0x00; //Poner pines en bajo
 
	// Codigo para el programa
    unsigned int time = 100;
	delay(5); // Retraso para no leer valores iniciales

    //Loop forever
    while ( 1 )
    {
        if (GP3 == 0x01) {
			GP5 = 0x00; // Encender unidades
	   		GP0 = 0x00; // Mostrar 0 en unidades
	   		delay(time);
	   		
	   		GP5 = ~GP5; // Encender decimales
	   		GP0 = 0x00; // Mostrar 0 en decenas
	   		delay(time);
    	}
		else {
			GP5 = 0x00; // Encender unidades
   			GP0 = 0x01; // Mostrar 1 en unidades
	   		delay(time);
	
	   		GP0 = 0x00; // Borrar numero previo
	   		GP5 = ~GP5; // Encender decenas
	   		GP2 = 0x01; // Mostrar 4 en decimales
	   		delay(time);
			GP2 = 0x00; // Limpiar
		}
 
	}
}

void delay(unsigned int tiempo)
{
	unsigned int m;
	unsigned int n;

	for(m=0;m<tiempo;m++)
	  for(n=0;n<1275;n++);
}